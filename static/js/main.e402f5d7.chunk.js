(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{69:function(e,a,t){e.exports=t(84)},76:function(e,a,t){},84:function(e,a,t){"use strict";t.r(a);var n=t(3),r=t.n(n),c=t(59),o=t.n(c),s=(t(76),t(12)),l=t(115),i=t(34),m=(t(78),t(86),t(85),i.a.initializeApp({apiKey:"AIzaSyAldAwalnW6viLMQR-djtoUudQNWTZREOc",authDomain:"dummy-gram.firebaseapp.com",projectId:"dummy-gram",storageBucket:"dummy-gram.appspot.com",messagingSenderId:"329994030699",appId:"1:329994030699:web:4d6e02e440b5def1066b2e",measurementId:"G-E5KS3423ZK"}).firestore()),u=i.a.auth(),p=i.a.storage();var d=function(e){var a=e.username,t=e.caption,c=e.imageUrl,o=e.avatar,u=e.postId,p=e.user,d=r.a.useState([]),g=Object(s.a)(d,2),f=g[0],E=g[1],v=r.a.useState(""),b=Object(s.a)(v,2),h=b[0],_=b[1];return Object(n.useEffect)(function(){var e;return u&&(e=m.collection("posts").doc(u).collection("comments").orderBy("timestamp","desc").onSnapshot(function(e){E(e.docs.map(function(e){return e.data()}))})),function(){e()}},[u]),r.a.createElement("div",{className:"post"},r.a.createElement("div",{className:"post__header"},r.a.createElement(l.a,{className:"post__avatar",alt:a,src:o,sx:{bgcolor:"Orange"}}),r.a.createElement("h3",{className:"post__username"},a)),r.a.createElement("div",{className:"post__container"},r.a.createElement("img",{className:"post__img",src:c,alt:"random sq"}),r.a.createElement("h4",{className:"post__text"},r.a.createElement("strong",null,a," "),t),r.a.createElement("div",{className:"post__comments"},f.map(function(e){return r.a.createElement("p",null,r.a.createElement("strong",null,e.username)," ",e.text)})),p&&r.a.createElement("form",{className:"post__commentBox"},r.a.createElement("input",{className:"post__input",type:"text",placeholder:"Add a comment...",value:h,onChange:function(e){return _(e.target.value)}}),r.a.createElement("button",{className:"post__button",disabled:!h,type:"submit",onClick:function(e){e.preventDefault(),m.collection("posts").doc(u).collection("comments").add({text:h,username:p.displayName,timestamp:i.a.firestore.FieldValue.serverTimestamp()}),_("")}},"Post"))))},g=t(118),f=t(117),E=t(119),v=t(114);var b=function(e){var a=Object(n.useState)(null),t=Object(s.a)(a,2),c=t[0],o=t[1],l=Object(n.useState)(""),u=Object(s.a)(l,2),d=u[0],f=u[1],E=Object(n.useState)(0),v=Object(s.a)(E,2),b=v[0],h=v[1];return r.a.createElement("div",{className:"imageUpload"},r.a.createElement("progress",{className:"imageUpload-progress",value:b,max:"100"}),r.a.createElement("input",{type:"text",name:"caption",id:"caption",placeholder:"Enter a Caption.. ",onChange:function(e){return f(e.target.value)},value:d}),r.a.createElement("input",{type:"file",name:"file",id:"file",onChange:function(e){e.target.files[0]&&o(e.target.files[0])}}),r.a.createElement(g.a,{onClick:function(){p.ref("images/".concat(c.name)).put(c).on("state_changed",function(e){h(Math.round(e.bytesTransferred/e.totalBytes*100))},function(e){console.log(e),alert(e.message)},function(){p.ref("images").child(c.name).getDownloadURL().then(function(a){m.collection("posts").add({timestamp:i.a.firestore.FieldValue.serverTimestamp(),caption:d,imageUrl:a,username:e.username,avatar:"avatar"}),h(0),f(""),o(null)})})}},"Upload"))};function h(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var _=Object(v.a)(function(e){return{paper:{position:"absolute",width:200,backgroundColor:e.palette.background.paper,border:"2px solid #000",borderRadius:e.shape.borderRadius,boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}});var y=function(){var e=_(),a=Object(n.useState)(h),t=Object(s.a)(a,1)[0],c=Object(n.useState)([]),o=Object(s.a)(c,2),l=o[0],i=o[1],p=Object(n.useState)(!1),v=Object(s.a)(p,2),y=v[0],O=v[1],j=Object(n.useState)(!1),N=Object(s.a)(j,2),S=N[0],C=N[1],w=Object(n.useState)(""),x=Object(s.a)(w,2),k=x[0],U=x[1],I=Object(n.useState)(""),A=Object(s.a)(I,2),B=A[0],R=A[1],D=Object(n.useState)(""),P=Object(s.a)(D,2),T=P[0],W=P[1],K=Object(n.useState)(null),L=Object(s.a)(K,2),M=L[0],z=L[1];return Object(n.useEffect)(function(){var e=u.onAuthStateChanged(function(e){e?(console.log(e),z(e)):(console.log("user logged out"),z(null))});return function(){e()}},[M,k]),Object(n.useEffect)(function(){m.collection("posts").orderBy("timestamp","desc").onSnapshot(function(e){i(e.docs.map(function(e){return{id:e.id,post:e.data()}}))})},[]),r.a.createElement("div",{className:"app"},r.a.createElement("div",{className:"app__header"},r.a.createElement("img",{src:"https://user-images.githubusercontent.com/27727921/185767526-a002a17d-c12e-4a6a-82a4-dd1a13a5ecda.png",alt:"instagram",className:"app__header__img"}),M?r.a.createElement(g.a,{onClick:function(){return u.signOut()},color:"secondary",variant:"contained",style:{margin:5}},"Logout"):r.a.createElement("div",{className:"login__container"},r.a.createElement(g.a,{onClick:function(){return C(!0)},color:"primary",variant:"contained",style:{margin:5}},"Sign In"),r.a.createElement(g.a,{onClick:function(){return O(!0)},color:"primary",variant:"contained",style:{margin:5}},"Sign Up"))),r.a.createElement(f.a,{open:y,onClose:function(){return O(!1)}},r.a.createElement("div",{style:t,className:e.paper},r.a.createElement("form",{className:"modal__signup"},r.a.createElement("center",null,r.a.createElement("img",{src:"https://user-images.githubusercontent.com/27727921/185767526-a002a17d-c12e-4a6a-82a4-dd1a13a5ecda.png",alt:"instagram",className:"modal__signup__img"}),r.a.createElement(E.a,{type:"text",placeholder:"username",value:k,onChange:function(e){return U(e.target.value)}}),r.a.createElement(E.a,{type:"text",placeholder:"email",value:B,onChange:function(e){return R(e.target.value)}}),r.a.createElement(E.a,{type:"password",placeholder:"password",value:T,onChange:function(e){return W(e.target.value)}}),r.a.createElement(g.a,{type:"submit",onClick:function(e){e.preventDefault(),u.createUserWithEmailAndPassword(B,T).then(function(e){return e.user.updateProfile({displayName:k})}).catch(function(e){return alert(e.message)}),O(!1)},variant:"contained",color:"primary"},"Sign Up"))))),r.a.createElement(f.a,{open:S,onClose:function(){return C(!1)}},r.a.createElement("div",{style:h(),className:e.paper},r.a.createElement("form",{className:"modal__signup"},r.a.createElement("center",null,r.a.createElement("img",{src:"https://user-images.githubusercontent.com/27727921/185767526-a002a17d-c12e-4a6a-82a4-dd1a13a5ecda.png",alt:"instagram",className:"modal__signup__img"}),r.a.createElement(E.a,{type:"text",placeholder:"email",value:B,onChange:function(e){return R(e.target.value)}}),r.a.createElement(E.a,{type:"password",placeholder:"password",value:T,onChange:function(e){return W(e.target.value)}}),r.a.createElement(g.a,{type:"submit",onClick:function(e){e.preventDefault(),u.signInWithEmailAndPassword(B,T).catch(function(e){return alert(e.message)}),C(!1)},variant:"contained",color:"primary"},"Sign In"))))),r.a.createElement("center",null,r.a.createElement("div",{className:"app__posts"},l.map(function(e){var a=e.id,t=e.post;return r.a.createElement(d,{key:a,postId:a,user:M,username:t.username,avatar:t.avatar,imageUrl:t.imageUrl,caption:t.caption})})),M?r.a.createElement(b,{username:M.displayName}):r.a.createElement("h3",null,"Sorry you need to login to upload posts")))};o.a.createRoot(document.getElementById("root")).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null)))}},[[69,2,1]]]);
//# sourceMappingURL=main.e402f5d7.chunk.js.map